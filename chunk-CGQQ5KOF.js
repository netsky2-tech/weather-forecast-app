import{a as ie}from"./chunk-K2DAFALU.js";import{a as ae,b as oe,c as re}from"./chunk-B6EDEMTX.js";import{$ as r,A as $,B as G,C as v,D as w,E as u,F as b,G as _,H as A,I as V,J as p,K as i,L as o,M as g,P as Q,Q as T,S as h,U as s,V as Y,W as H,X as J,Z as N,_ as K,aa as M,ba as m,ca as X,da as W,ea as y,fa as E,g as z,ga as S,h as q,i as j,j as I,ja as Z,l as L,la as ee,m as R,na as te,oa as x,q as O,r as C,s as f,sa as ne,va as k,w as P,x as U,y as B,z as l}from"./chunk-R7K5JG2H.js";var ue=t=>({$implicit:t}),le=(t,a)=>a.id;function be(t,a){if(t&1){let e=T();i(0,"li",1)(1,"a",4),h("click",function(){let c=C(e).$implicit,d=s();return f(d.selectTab(c.id))}),r(2),o(),i(3,"button",5),h("click",function(c){let d=C(e).$implicit,me=s();return f(me.closeTab(c,d.id))}),o()()}if(t&2){let e=a.$implicit,n=s();l(),K("active",e.id===n.activeTab()),p("id","tab-"+e.id),u("aria.selected",e.id===n.activeTab()),l(),m(" ",e.title," "),l(),u("aria-label","Cerrar pesta\xF1a "+e.title+e.id)}}function _e(t,a){t&1&&Q(0)}function Ce(t,a){if(t&1&&(i(0,"div",6),w(1,_e,1,0,"ng-container",7),o()),t&2){let e=s().$implicit,n=s();u("aria-labelledby","tab-"+e.id),l(),p("ngTemplateOutlet",n.tabTemplate)("ngTemplateOutletContext",y(3,ue,e.id))}}function fe(t,a){if(t&1&&b(0,Ce,2,5,"div",6),t&2){let e=a.$implicit,n=s();_(e.id===n.activeTab()?0:-1)}}var D=class t{tabs=[];requestedTab=null;tabClosed=new $;requestedTabConsumed=new $;tabTemplate;activeTab=P(null);ngOnChanges(a){if(a.tabs){let n=a.tabs.currentValue.map(d=>d.id),c=null;this.requestedTab&&n.includes(this.requestedTab)?(c=this.requestedTab,this.requestedTabConsumed.emit(this.requestedTab)):this.activeTab()&&n.includes(this.activeTab())?c=this.activeTab():c=n.length>0?n[0]:null,this.activeTab.set(c)}}selectTab(a){this.activeTab.set(a)}closeTab(a,e){if(a.stopPropagation(),this.activeTab()===e){let n=this.tabs.findIndex(c=>c.id===e);if(this.tabs.length>1){let c=n>0?n-1:1;this.activeTab.set(this.tabs[c].id)}else this.activeTab.set(null)}this.tabClosed.emit(e)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=v({type:t,selectors:[["app-tabs-container"]],contentQueries:function(e,n,c){if(e&1&&Y(c,G,5),e&2){let d;H(d=J())&&(n.tabTemplate=d.first)}},inputs:{tabs:"tabs",requestedTab:"requestedTab"},outputs:{tabClosed:"tabClosed",requestedTabConsumed:"requestedTabConsumed"},features:[U],decls:7,vars:0,consts:[["role","tablist",1,"nav","nav-tabs"],["role","presentation",1,"nav-item"],[1,"row"],[1,"tab-content"],["href","javascript:void(0)","role","tab",1,"nav-link",3,"click","id"],["type","button",1,"btn-close","btn-close-sm","ms-3",3,"click"],["role","tabpanel"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){e&1&&(i(0,"ul",0),A(1,be,4,6,"li",1,le),o(),i(3,"div",2)(4,"div",3),A(5,fe,1,1,null,null,le),o()()),e&2&&(l(),V(n.tabs),l(4),V(n.tabs))},dependencies:[x,ee],styles:[".nav-tabs[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;overflow-x:auto;overflow-y:hidden;width:100%;border-bottom:none}.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{flex-shrink:0;display:flex;align-items:center;margin-right:1rem}.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#495057;font-weight:500;padding:10px 15px;background-color:transparent;border:none;border-radius:0;display:flex;align-items:center;white-space:nowrap}.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#0056b2;background:#fff;border:none;border-bottom:4px solid #007bff;text-decoration:none}.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{flex-shrink:0;color:#007bff;margin-left:-.25rem;margin-right:.5rem}.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{opacity:1;color:red}.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover:not(.active){color:#212529;background-color:#f8f9fa;cursor:pointer}.tab-content[_ngcontent-%COMP%]{background-color:#f8f9fa;border:1px solid #dee2e6;border-radius:0 0 8px 8px;border-top:none!important;padding:1.5rem 1.5rem 2rem!important}.row[_ngcontent-%COMP%]{margin-left:0;margin-right:0}"]})};var ve=t=>["/forecast",t];function xe(t,a){if(t&1&&(i(0,"div",0)(1,"h2",2),r(2),o(),i(3,"div",3),g(4,"img",4),i(5,"div",5)(6,"h2",6),r(7),o(),i(8,"p",7),r(9),o()()(),i(10,"div",8)(11,"div",9)(12,"span",10),r(13,"\u{1F4A7} Humedad"),o(),i(14,"span",11),r(15),o(),i(16,"div",12),g(17,"div",13),o()(),i(18,"div",14)(19,"span",10),r(20,"Sensaci\xF3n"),o(),i(21,"span",11),r(22),o()(),i(23,"div",14)(24,"span",10),r(25,"\u{1F4A8} Viento"),o(),i(26,"span",11),r(27),E(28,"number"),o()(),i(29,"div",14)(30,"span",10),r(31,"Presi\xF3n"),o(),i(32,"span",11),r(33),o()(),i(34,"div",14)(35,"span",10),r(36,"\xCDndice UV"),o(),i(37,"span",11),r(38),E(39,"number"),o(),i(40,"div",12),g(41,"div",15),o()(),i(42,"div",14)(43,"span",10),r(44,"Visibilidad"),o(),i(45,"span",11),r(46),E(47,"number"),o()(),i(48,"div",14)(49,"span",10),r(50," \u2600\uFE0F Amanecer "),o(),i(51,"span",11),r(52),o()(),i(53,"div",14)(54,"span",10),r(55," \u{1F319} Atardecer "),o(),i(56,"span",11),r(57),o()()(),i(58,"a",16),r(59," Ver pronostico de los proximos 5 dias "),g(60,"i",17),o()()),t&2){let e=a,n=s();l(2),M(e.city_name),l(2),p("src","https://www.weatherbit.io/static/img/icons/"+e.weather.icon+".png",B)("alt",e.weather.description),l(3),m("",e.temp,"\xB0C"),l(2),M(e.weather.description),l(6),m("",e.rh,"%"),l(2),N("width",e.rh+"%"),u("aria-valuenow",e.rh),l(5),m("",e.app_temp,"\xB0C"),l(5),X("",S(28,21,e.wind_spd,"1.0-1")," mph ",e.wind_cdir_full),l(6),m("",e.pres," mb"),l(5),M(S(39,24,e.uv,"1.0-0")),l(3),N("width",(e.uv||0/11)*100+"%"),u("aria-valuenow",e.uv),l(5),M(S(47,27,e.vis,"1.0-0")),l(6),m("",e.sunrise," "),l(5),m("",e.sunset," "),l(),p("routerLink",y(30,ve,n.zipcode))}}function he(t,a){t&1&&(i(0,"div",1),g(1,"i",18),i(2,"div")(3,"h5",19),r(4,"Error de Ubicaci\xF3n"),o(),i(5,"p",20),r(6," No se pudieron cargar los datos. Por favor, aseg\xFArate de que sea un c\xF3digo postal v\xE1lido de EE.UU. y elim\xEDnalo para intentarlo de nuevo. "),o()()()),t&2&&p("@cardFade",void 0)}var F=class t{zipcode;conditions=null;static \u0275fac=function(e){return new(e||t)};static \u0275cmp=v({type:t,selectors:[["app-current-conditions"]],inputs:{zipcode:"zipcode",conditions:"conditions"},decls:2,vars:1,consts:[[1,"weather-card"],["role","alert",1,"alert","alert-danger","d-flex","align-items-center","p-4","mt-4"],[1,"weather-card-title"],[1,"current-temp-section"],["width","80","height","80",3,"src","alt"],[1,"temp-details"],[1,"temperature"],[1,"description"],[1,"details-grid"],[1,"detail-item","detail-graph"],[1,"detail-label"],[1,"detail-value"],[1,"progress","mt-1",2,"height","5px"],["role","progressbar","aria-label","Nivel de humedad","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-info"],[1,"detail-item"],["role","progressbar","aria-label","Nivel de \xEDndice UV","aria-valuemin","0","aria-valuemax","11",1,"progress-bar","bg-warning"],[1,"btn","btn-link","link-style","mt-4",3,"routerLink"],[1,"bi","bi-arrow-right","ms-2"],[1,"bi","bi-exclamation-triangle-fill","me-3",2,"font-size","1.5rem"],[1,"alert-heading"],[1,"mb-0"]],template:function(e,n){if(e&1&&b(0,xe,61,32,"div",0)(1,he,7,1,"div",1),e&2){let c;_((c=n.conditions)?0:1,c)}},dependencies:[x,k,te],styles:[".weather-card[_ngcontent-%COMP%]{background-color:#fff;padding:30px;border-radius:12px;box-shadow:0 4px 12px #00000014;transition:all .3s ease}.weather-card[_ngcontent-%COMP%]:hover{box-shadow:0 6px 16px #00000014}.weather-card[_ngcontent-%COMP%]   .weather-card-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#333;margin-bottom:25px;border-bottom:1px solid #e9ecef;padding-bottom:15px}.weather-card[_ngcontent-%COMP%]   .current-temp-section[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:30px}.weather-card[_ngcontent-%COMP%]   .current-temp-section[_ngcontent-%COMP%]   .weather-icon[_ngcontent-%COMP%]{width:90px;height:90px;flex-shrink:0}.weather-card[_ngcontent-%COMP%]   .current-temp-section[_ngcontent-%COMP%]   .temp-details[_ngcontent-%COMP%]{margin-left:20px}.weather-card[_ngcontent-%COMP%]   .current-temp-section[_ngcontent-%COMP%]   .temp-details[_ngcontent-%COMP%]   .temperature[_ngcontent-%COMP%]{font-size:3rem;font-weight:300;margin-bottom:-5px;color:#333}.weather-card[_ngcontent-%COMP%]   .current-temp-section[_ngcontent-%COMP%]   .temp-details[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:1rem;color:#6c757d;font-weight:400;text-transform:capitalize;margin:0}.weather-card[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:20px;padding-top:15px;border-top:1px dashed #e9ecef}.weather-card[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;padding:5px 0}.weather-card[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{font-size:.9rem;color:#6c757d}.weather-card[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#333}.weather-card[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]   .detail-item.detail-graph[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%], .weather-card[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]   .detail-item.detail-graph[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{display:inline-block}.weather-card[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]   .detail-item.detail-graph[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{margin-top:5px;width:100%}.weather-card[_ngcontent-%COMP%]   .link-style[_ngcontent-%COMP%]{display:inline-flex;align-items:center;color:#0056b2;font-weight:500;text-decoration:none;padding:0}.weather-card[_ngcontent-%COMP%]   .link-style[_ngcontent-%COMP%]:hover{text-decoration:underline;opacity:.85}@keyframes _ngcontent-%COMP%_cardFadeIn{0%{opacity:0;transform:translateY(15px)}to{opacity:1;transform:translateY(0)}}.weather-card[_ngcontent-%COMP%], .loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_cardFadeIn .35s ease-in forwards}"]})};var pe=()=>["/dashboard"];function Me(t,a){t&1&&(i(0,"div",3),r(1," No has a\xF1adido ninguna ubicaci\xF3n. "),i(2,"a",5),r(3,"A\xF1ade una"),o(),r(4," para empezar. "),o()),t&2&&(l(2),p("routerLink",W(1,pe)))}function Oe(t,a){if(t&1&&g(0,"app-current-conditions",7),t&2){let e=s().$implicit,n=s(2);p("zipcode",e)("conditions",n.weatherDataMap().get(e)||null)}}function Pe(t,a){if(t&1&&(i(0,"div",8)(1,"div",9)(2,"span",10),r(3,"Cargando..."),o()(),i(4,"span",11),r(5),o()()),t&2){let e=s().$implicit;l(5),m("Cargando datos para ",e,"...")}}function we(t,a){if(t&1&&b(0,Oe,1,2,"app-current-conditions",7)(1,Pe,6,1,"div",8),t&2){let e=a.$implicit,n=s(2);_(n.weatherDataMap().has(e)?0:1)}}function Te(t,a){if(t&1){let e=T();i(0,"app-tabs-container",6),h("tabClosed",function(c){C(e);let d=s();return f(d.onTabClosed(c))})("requestedTabConsumed",function(){C(e);let c=s();return f(c.requestedActiveTab.set(null))}),w(1,we,2,1,"ng-template"),o()}if(t&2){let e=s();p("tabs",e.tabs())("requestedTab",e.requestedActiveTab())}}var de=class t{ngOnInit(){this.requestedActiveTab.set(this.route.snapshot.queryParamMap.get("active"))}locationService=O(ie);weatherApi=O(re);route=O(ne);locations=this.locationService.locations;requestedActiveTab=P(null);locationSignal=this.locationService.locations;locations$=ae(this.locationSignal);weatherDataMap$=this.locations$.pipe(L(a=>a.length>0?I(0):I(50)),R(a=>{if(a.length===0)return z(new Map);let e=a.map(n=>this.weatherApi.getCurrentConditions(n).pipe(q(c=>({zip:n,data:c}))));return j(e).pipe(q(n=>{let c=new Map;return n.forEach(d=>{c.set(d.zip,d.data)}),c}))}));weatherDataMap=oe(this.weatherDataMap$,{initialValue:new Map});tabs=Z(()=>{let a=this.weatherDataMap();return this.locations().map(e=>{if(!a.has(e))return{id:e,title:`Cargando... (${e})`};let n=a.get(e);return n===null?{id:e,title:`Ubicaci\xF3n Inv\xE1lida (${e})`}:{id:e,title:n?`${n.city_name} (${e})`:`Cargando... (${e})`}})});onTabClosed(a){this.locationService.removeLocation(a)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=v({type:t,selectors:[["app-weather-tabs"]],decls:8,vars:3,consts:[[1,"container","flex-grow-1","d-flex","flex-column","mt-4"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"btn","btn-success","btn-new-zip",3,"routerLink"],[1,"alert","alert-info","text-center"],[3,"tabs","requestedTab"],[3,"routerLink"],[3,"tabClosed","requestedTabConsumed","tabs","requestedTab"],[3,"zipcode","conditions"],[1,"d-flex","justify-content-center","align-items-center","p-5","loading-spinner"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"ms-3","text-muted"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"div",1)(2,"h1"),r(3,"Clima Actual"),o(),i(4,"a",2),r(5," + Nueva ubicaci\xF3n "),o()(),b(6,Me,5,2,"div",3)(7,Te,2,2,"app-tabs-container",4),o()),e&2&&(l(4),p("routerLink",W(2,pe)),l(2),_(n.locations().length===0?6:7))},dependencies:[x,D,F,k],styles:[".container[_ngcontent-%COMP%]{padding-bottom:30px}.container[_ngcontent-%COMP%]   .d-flex.justify-content-between.align-items-center.mb-3[_ngcontent-%COMP%]{padding-bottom:10px;border-bottom:1px solid #dee2e6;margin-bottom:1.5rem!important}.container[_ngcontent-%COMP%]   .d-flex.justify-content-between.align-items-center.mb-3[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:300;color:#333;margin:0}.container[_ngcontent-%COMP%]   .d-flex.justify-content-between.align-items-center.mb-3[_ngcontent-%COMP%]   .btn-outline-secondary[_ngcontent-%COMP%]{color:#6c757d;border-color:#dee2e6;font-weight:500;transition:all .2s ease}.container[_ngcontent-%COMP%]   .d-flex.justify-content-between.align-items-center.mb-3[_ngcontent-%COMP%]   .btn-outline-secondary[_ngcontent-%COMP%]:hover{color:#fff;background-color:#007bff;border-color:#007bff}.container[_ngcontent-%COMP%]   .alert.alert-info[_ngcontent-%COMP%]{border-radius:8px;background-color:#e6f2ff;color:#6c757d;border-color:#b3d7ff;font-size:1.1rem;padding:1.5rem}.container[_ngcontent-%COMP%]   .alert.alert-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff;font-weight:600;text-decoration:none}.container[_ngcontent-%COMP%]   .alert.alert-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.container[_ngcontent-%COMP%]   .btn-new-zip[_ngcontent-%COMP%]{font-size:.9rem;padding:.5rem 1rem;color:#f8f9fa;border-color:#dee2e6}.container[_ngcontent-%COMP%]   .btn-new-zip[_ngcontent-%COMP%]:hover{color:#fff;background-color:#007bff;border-color:#007bff}"]})};export{de as WeatherTabs};
