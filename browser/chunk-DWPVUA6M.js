import{f as c,j as s,l as n,m as l,pa as m}from"./chunk-Q7PIQP5K.js";var i=class a{DEFAULT_TTL=7200*1e3;constructor(){}setItem(t,e,r=this.DEFAULT_TTL){let o=Date.now()+r,f={data:e,expiry:o};try{localStorage.setItem(t,JSON.stringify(f))}catch(y){console.error("Error saving to localstorage",y)}}getItem(t){let e=localStorage.getItem(t);if(!e)return null;try{let r=JSON.parse(e);return Date.now()>r.expiry?(this.removeItem(t),null):r.data}catch(r){return console.error("Error parsing cached data",r),this.removeItem(t),null}}removeItem(t){localStorage.removeItem(t)}clear(){localStorage.clear()}static \u0275fac=function(e){return new(e||a)};static \u0275prov=n({token:a,factory:a.\u0275fac,providedIn:"root"})};var h={production:!1,API_URL:"https://api.weatherbit.io/v2.0",API_KEY:"177ffa1c3a194eb38fbffbbb6738cf45"};var p=class a{http=l(m);cache=l(i);baseUrl=h.API_URL;apiKey=h.API_KEY;getCurrentConditions(t){let e=`current_${t}`,r=this.cache.getItem(e);return r?c(r):this.http.get(`${this.baseUrl}/current`,{params:{postal_code:t,key:this.apiKey,units:"M"}}).pipe(s(o=>this.cache.setItem(e,o)))}getForecast(t){let e=`forecast_${t}`,r=this.cache.getItem(e);return r?c(r):this.http.get(`${this.baseUrl}/forecast/daily`,{params:{postal_code:t,key:this.apiKey,days:5,units:"M"}}).pipe(s(o=>this.cache.setItem(e,o)))}static \u0275fac=function(e){return new(e||a)};static \u0275prov=n({token:a,factory:a.\u0275fac,providedIn:"root"})};export{p as a};
