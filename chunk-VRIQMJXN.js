import{a as le}from"./chunk-L42N7ELW.js";import{a as ce,b as se,c as de}from"./chunk-JBDOSX4G.js";import{$ as N,A as q,Aa as S,B as R,C,D as g,E as b,F as U,G as B,J as s,K as n,L as a,M as u,P as G,Q,R as Y,S as P,U as x,W as d,X as H,Y as J,Z as K,_ as X,aa as Z,ba as o,ca as h,da as m,ea as ee,fa as A,g as $,ga as w,h as I,ha as T,i as V,ia as y,j as F,ja as te,l as W,m as z,ma as ne,oa as ie,pa as E,q as M,qa as ae,r as f,s as _,sa as re,ta as v,w as O,x as L,xa as oe,y as j,z as c}from"./chunk-GVEXALYS.js";var _e=i=>({$implicit:i});function Ce(i,r){if(i&1){let e=P();n(0,"li",5)(1,"a",6),x("click",function(){let l=f(e).$implicit,p=d();return _(p.selectTab(l.id))}),o(2),a(),n(3,"button",7),x("click",function(l){let p=f(e).$implicit,fe=d();return _(fe.closeTab(l,p.id))}),a()()}if(i&2){let e=r.$implicit,t=d();c(),Z("active",e.id===t.activeTab()),s("id","tab-"+e.id),b("aria.selected",e.id===t.activeTab()),c(),m(" ",e.title," "),c(),b("aria-label","Cerrar pesta\xF1a "+e.title+e.id)}}function ve(i,r){i&1&&Y(0)}function xe(i,r){if(i&1&&(n(0,"div",9),g(1,ve,1,0,"ng-container",10),a()),i&2){let e=d().$implicit,t=d();b("aria-labelledby","tab-"+e.id),c(),s("ngTemplateOutlet",t.tabTemplate)("ngTemplateOutletContext",w(3,_e,e.id))}}function he(i,r){if(i&1&&(G(0),g(1,xe,2,5,"div",8),Q()),i&2){let e=r.$implicit,t=d();c(),s("ngIf",e.id===t.activeTab())}}var k=class i{tabs=[];requestedTab=null;tabClosed=new q;requestedTabConsumed=new q;tabTemplate;activeTab=O(null);ngOnChanges(r){if(r.tabs){let t=r.tabs.currentValue.map(p=>p.id),l=null;this.requestedTab&&t.includes(this.requestedTab)?(l=this.requestedTab,this.requestedTabConsumed.emit(this.requestedTab)):this.activeTab()&&t.includes(this.activeTab())?l=this.activeTab():l=t.length>0?t[0]:null,this.activeTab.set(l)}}selectTab(r){this.activeTab.set(r)}closeTab(r,e){if(r.stopPropagation(),this.activeTab()===e){let t=this.tabs.findIndex(l=>l.id===e);if(this.tabs.length>1){let l=t>0?t-1:1;this.activeTab.set(this.tabs[l].id)}else this.activeTab.set(null)}this.tabClosed.emit(e)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=C({type:i,selectors:[["app-tabs-container"]],contentQueries:function(e,t,l){if(e&1&&H(l,R,5),e&2){let p;J(p=K())&&(t.tabTemplate=p.first)}},inputs:{tabs:"tabs",requestedTab:"requestedTab"},outputs:{tabClosed:"tabClosed",requestedTabConsumed:"requestedTabConsumed"},features:[L],decls:5,vars:2,consts:[["role","tablist",1,"nav","nav-tabs"],["class","nav-item","role","presentation",4,"ngFor","ngForOf"],[1,"row"],[1,"tab-content"],[4,"ngFor","ngForOf"],["role","presentation",1,"nav-item"],["href","javascript:void(0)","role","tab",1,"nav-link",3,"click","id"],["type","button",1,"btn-close","btn-close-sm","ms-3",3,"click"],["role","tabpanel",4,"ngIf"],["role","tabpanel"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,t){e&1&&(n(0,"ul",0),g(1,Ce,4,6,"li",1),a(),n(2,"div",2)(3,"div",3),g(4,he,2,1,"ng-container",4),a()()),e&2&&(c(),s("ngForOf",t.tabs),c(3),s("ngForOf",t.tabs))},dependencies:[v,ie,E,ae],styles:[".nav-tabs[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;overflow-x:auto;overflow-y:hidden;width:100%;border-bottom:none}.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{flex-shrink:0;display:flex;align-items:center;margin-right:1rem}.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#495057;font-weight:500;padding:10px 15px;background-color:transparent;border:none;border-radius:0;display:flex;align-items:center;white-space:nowrap}.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#0056b2;background:#fff;border:none;border-bottom:4px solid #007bff;text-decoration:none}.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{flex-shrink:0;color:#007bff;margin-left:-.25rem;margin-right:.5rem}.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{opacity:1;color:red}.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover:not(.active){color:#212529;background-color:#f8f9fa;cursor:pointer}.tab-content[_ngcontent-%COMP%]{background-color:#f8f9fa;border:1px solid #dee2e6;border-radius:0 0 8px 8px;border-top:none!important;padding:1.5rem 1.5rem 2rem!important}.row[_ngcontent-%COMP%]{margin-left:0;margin-right:0}"]})};var Me=i=>["/forecast",i];function Oe(i,r){if(i&1&&(n(0,"div",0)(1,"h2",2),o(2),a(),n(3,"div",3),u(4,"img",4),n(5,"div",5)(6,"h2",6),o(7),a(),n(8,"p",7),o(9),a()()(),n(10,"div",8)(11,"div",9)(12,"span",10),o(13,"\u{1F4A7} Humedad"),a(),n(14,"span",11),o(15),a(),n(16,"div",12),u(17,"div",13),a()(),n(18,"div",14)(19,"span",10),o(20,"Sensaci\xF3n"),a(),n(21,"span",11),o(22),a()(),n(23,"div",14)(24,"span",10),o(25,"\u{1F4A8} Viento"),a(),n(26,"span",11),o(27),T(28,"number"),a()(),n(29,"div",14)(30,"span",10),o(31,"Presi\xF3n"),a(),n(32,"span",11),o(33),a()(),n(34,"div",14)(35,"span",10),o(36,"\xCDndice UV"),a(),n(37,"span",11),o(38),T(39,"number"),a(),n(40,"div",12),u(41,"div",15),a()(),n(42,"div",14)(43,"span",10),o(44,"Visibilidad"),a(),n(45,"span",11),o(46),T(47,"number"),a()(),n(48,"div",14)(49,"span",10),o(50," \u2600\uFE0F Amanecer "),a(),n(51,"span",11),o(52),a()(),n(53,"div",14)(54,"span",10),o(55," \u{1F319} Atardecer "),a(),n(56,"span",11),o(57),a()()(),n(58,"a",16),o(59," Ver pronostico de los proximos 5 dias "),u(60,"i",17),a()()),i&2){let e=r,t=d();c(2),h(e.city_name),c(2),s("src","https://www.weatherbit.io/static/img/icons/"+e.weather.icon+".png",j)("alt",e.weather.description),c(3),m("",e.temp,"\xB0C"),c(2),h(e.weather.description),c(6),m("",e.rh,"%"),c(2),N("width",e.rh+"%"),b("aria-valuenow",e.rh),c(5),m("",e.app_temp,"\xB0C"),c(5),ee("",y(28,21,e.wind_spd,"1.0-1")," mph ",e.wind_cdir_full),c(6),m("",e.pres," mb"),c(5),h(y(39,24,e.uv,"1.0-0")),c(3),N("width",(e.uv||0/11)*100+"%"),b("aria-valuenow",e.uv),c(5),h(y(47,27,e.vis,"1.0-0")),c(6),m("",e.sunrise," "),c(5),m("",e.sunset," "),c(),s("routerLink",w(30,Me,t.zipcode))}}function Pe(i,r){i&1&&(n(0,"div",1),u(1,"i",18),n(2,"div")(3,"h5",19),o(4,"Error de Ubicaci\xF3n"),a(),n(5,"p",20),o(6," No se pudieron cargar los datos. Por favor, aseg\xFArate de que sea un c\xF3digo postal v\xE1lido de EE.UU. y elim\xEDnalo para intentarlo de nuevo. "),a()()()),i&2&&s("@cardFade",void 0)}var D=class i{zipcode;conditions=null;static \u0275fac=function(e){return new(e||i)};static \u0275cmp=C({type:i,selectors:[["app-current-conditions"]],inputs:{zipcode:"zipcode",conditions:"conditions"},decls:2,vars:1,consts:[[1,"weather-card"],["role","alert",1,"alert","alert-danger","d-flex","align-items-center","p-4","mt-4"],[1,"weather-card-title"],[1,"current-temp-section"],["width","80","height","80",3,"src","alt"],[1,"temp-details"],[1,"temperature"],[1,"description"],[1,"details-grid"],[1,"detail-item","detail-graph"],[1,"detail-label"],[1,"detail-value"],[1,"progress","mt-1",2,"height","5px"],["role","progressbar","aria-label","Nivel de humedad","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-info"],[1,"detail-item"],["role","progressbar","aria-label","Nivel de \xEDndice UV","aria-valuemin","0","aria-valuemax","11",1,"progress-bar","bg-warning"],[1,"btn","btn-link","link-style","mt-4",3,"routerLink"],[1,"bi","bi-arrow-right","ms-2"],[1,"bi","bi-exclamation-triangle-fill","me-3",2,"font-size","1.5rem"],[1,"alert-heading"],[1,"mb-0"]],template:function(e,t){if(e&1&&U(0,Oe,61,32,"div",0)(1,Pe,7,1,"div",1),e&2){let l;B((l=t.conditions)?0:1,l)}},dependencies:[v,S,re],styles:[".weather-card[_ngcontent-%COMP%]{background-color:#fff;padding:30px;border-radius:12px;box-shadow:0 4px 12px #00000014;transition:all .3s ease}.weather-card[_ngcontent-%COMP%]:hover{box-shadow:0 6px 16px #00000014}.weather-card[_ngcontent-%COMP%]   .weather-card-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#333;margin-bottom:25px;border-bottom:1px solid #e9ecef;padding-bottom:15px}.weather-card[_ngcontent-%COMP%]   .current-temp-section[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:30px}.weather-card[_ngcontent-%COMP%]   .current-temp-section[_ngcontent-%COMP%]   .weather-icon[_ngcontent-%COMP%]{width:90px;height:90px;flex-shrink:0}.weather-card[_ngcontent-%COMP%]   .current-temp-section[_ngcontent-%COMP%]   .temp-details[_ngcontent-%COMP%]{margin-left:20px}.weather-card[_ngcontent-%COMP%]   .current-temp-section[_ngcontent-%COMP%]   .temp-details[_ngcontent-%COMP%]   .temperature[_ngcontent-%COMP%]{font-size:3rem;font-weight:300;margin-bottom:-5px;color:#333}.weather-card[_ngcontent-%COMP%]   .current-temp-section[_ngcontent-%COMP%]   .temp-details[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:1rem;color:#6c757d;font-weight:400;text-transform:capitalize;margin:0}.weather-card[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:20px;padding-top:15px;border-top:1px dashed #e9ecef}.weather-card[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;padding:5px 0}.weather-card[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{font-size:.9rem;color:#6c757d}.weather-card[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#333}.weather-card[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]   .detail-item.detail-graph[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%], .weather-card[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]   .detail-item.detail-graph[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{display:inline-block}.weather-card[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]   .detail-item.detail-graph[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{margin-top:5px;width:100%}.weather-card[_ngcontent-%COMP%]   .link-style[_ngcontent-%COMP%]{display:inline-flex;align-items:center;color:#0056b2;font-weight:500;text-decoration:none;padding:0}.weather-card[_ngcontent-%COMP%]   .link-style[_ngcontent-%COMP%]:hover{text-decoration:underline;opacity:.85}@keyframes _ngcontent-%COMP%_cardFadeIn{0%{opacity:0;transform:translateY(15px)}to{opacity:1;transform:translateY(0)}}.weather-card[_ngcontent-%COMP%], .loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_cardFadeIn .35s ease-in forwards}"]})};var be=()=>["/dashboard"];function we(i,r){i&1&&(n(0,"div",5),o(1," No has a\xF1adido ninguna ubicaci\xF3n. "),n(2,"a",6),o(3,"A\xF1ade una"),a(),o(4," para empezar. "),a()),i&2&&(c(2),s("routerLink",A(1,be)))}function Te(i,r){if(i&1&&u(0,"app-current-conditions",8),i&2){let e=r.$implicit,t=d(2);s("zipcode",e)("conditions",t.weatherDataMap().get(e)||null)}}function ye(i,r){if(i&1){let e=P();n(0,"app-tabs-container",7),x("tabClosed",function(l){f(e);let p=d();return _(p.onTabClosed(l))})("requestedTabConsumed",function(){f(e);let l=d();return _(l.requestedActiveTab.set(null))}),g(1,Te,1,2,"ng-template"),a()}if(i&2){let e=d();s("tabs",e.tabs())("requestedTab",e.requestedActiveTab())}}var ue=class i{ngOnInit(){this.requestedActiveTab.set(this.route.snapshot.queryParamMap.get("active"))}locationService=M(le);weatherApi=M(de);route=M(oe);locations=this.locationService.locations;requestedActiveTab=O(null);locationSignal=this.locationService.locations;locations$=ce(this.locationSignal);weatherDataMap$=this.locations$.pipe(W(r=>r.length>0?F(0):F(50)),z(r=>{if(r.length===0)return $(new Map);let e=r.map(t=>this.weatherApi.getCurrentConditions(t).pipe(I(l=>({zip:t,data:l}))));return V(e).pipe(I(t=>{let l=new Map;return t.forEach(p=>{l.set(p.zip,p.data)}),l}))}));weatherDataMap=se(this.weatherDataMap$,{initialValue:new Map});tabs=ne(()=>{let r=this.weatherDataMap();return this.locations().map(e=>{if(!r.has(e))return{id:e,title:`Cargando... (${e})`};let t=r.get(e);return t===null?{id:e,title:`Ubicaci\xF3n Inv\xE1lida (${e})`}:{id:e,title:t?`${t.city_name} (${e})`:`Cargando... (${e})`}})});onTabClosed(r){this.locationService.removeLocation(r)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=C({type:i,selectors:[["app-weather-tabs"]],decls:9,vars:4,consts:[["showTabs",""],[1,"container","flex-grow-1","d-flex","flex-column","mt-4"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"btn","btn-success","btn-new-zip",3,"routerLink"],["class","alert alert-info text-center",4,"ngIf","ngIfElse"],[1,"alert","alert-info","text-center"],[3,"routerLink"],[3,"tabClosed","requestedTabConsumed","tabs","requestedTab"],[3,"zipcode","conditions"]],template:function(e,t){if(e&1&&(n(0,"div",1)(1,"div",2)(2,"h1"),o(3,"Clima Actual"),a(),n(4,"a",3),o(5," + Nueva ubicaci\xF3n "),a()(),g(6,we,5,2,"div",4)(7,ye,2,2,"ng-template",null,0,te),a()),e&2){let l=X(8);c(4),s("routerLink",A(3,be)),c(2),s("ngIf",t.locations().length===0)("ngIfElse",l)}},dependencies:[v,E,k,D,S],styles:[".container[_ngcontent-%COMP%]{padding-bottom:30px}.container[_ngcontent-%COMP%]   .d-flex.justify-content-between.align-items-center.mb-3[_ngcontent-%COMP%]{padding-bottom:10px;border-bottom:1px solid #dee2e6;margin-bottom:1.5rem!important}.container[_ngcontent-%COMP%]   .d-flex.justify-content-between.align-items-center.mb-3[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:300;color:#333;margin:0}.container[_ngcontent-%COMP%]   .d-flex.justify-content-between.align-items-center.mb-3[_ngcontent-%COMP%]   .btn-outline-secondary[_ngcontent-%COMP%]{color:#6c757d;border-color:#dee2e6;font-weight:500;transition:all .2s ease}.container[_ngcontent-%COMP%]   .d-flex.justify-content-between.align-items-center.mb-3[_ngcontent-%COMP%]   .btn-outline-secondary[_ngcontent-%COMP%]:hover{color:#fff;background-color:#007bff;border-color:#007bff}.container[_ngcontent-%COMP%]   .alert.alert-info[_ngcontent-%COMP%]{border-radius:8px;background-color:#e6f2ff;color:#6c757d;border-color:#b3d7ff;font-size:1.1rem;padding:1.5rem}.container[_ngcontent-%COMP%]   .alert.alert-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff;font-weight:600;text-decoration:none}.container[_ngcontent-%COMP%]   .alert.alert-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.container[_ngcontent-%COMP%]   .btn-new-zip[_ngcontent-%COMP%]{font-size:.9rem;padding:.5rem 1rem;color:#f8f9fa;border-color:#dee2e6}.container[_ngcontent-%COMP%]   .btn-new-zip[_ngcontent-%COMP%]:hover{color:#fff;background-color:#007bff;border-color:#007bff}"]})};export{ue as WeatherTabs};
