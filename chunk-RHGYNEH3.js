import{a as me}from"./chunk-YW4GZGBV.js";import{a as j}from"./chunk-DWPVUA6M.js";import{$ as k,A as v,B as d,C as i,D as o,E as C,H as Z,I as ee,J as te,K as S,M as P,O as u,P as ne,Q as ie,R as oe,S as E,T as N,U as ae,V as r,W as y,X as m,Y as re,Z as $,_ as I,ba as D,ca as F,e as W,ea as V,f as U,fa as le,g as G,ga as se,h as B,ha as ce,i as Q,ia as x,ja as de,k as z,m as g,ma as ue,n as O,na as h,o as M,p as H,q as T,ra as pe,s as w,t as J,u as K,ua as q,v as l,w as X,x as Y,y as _,z as p}from"./chunk-Q7PIQP5K.js";var he=n=>({$implicit:n});function Oe(n,t){if(n&1){let e=S();i(0,"li",5)(1,"a",6),P("click",function(){let s=O(e).$implicit,c=u();return M(c.selectTab(s.id))}),r(2),o(),i(3,"button",7),P("click",function(s){let c=O(e).$implicit,b=u();return M(b.closeTab(s,c.id))}),o()()}if(n&2){let e=t.$implicit,a=u();l(),ae("active",e.id===a.activeTab()),d("id","tab-"+e.id),v("aria.selected",e.id===a.activeTab()),l(),m(" ",e.title," "),l(),v("aria-label","Cerrar pesta\xF1a "+e.title+e.id)}}function Me(n,t){n&1&&te(0)}function we(n,t){if(n&1&&(i(0,"div",9),p(1,Me,1,0,"ng-container",10),o()),n&2){let e=u().$implicit,a=u();v("aria-labelledby","tab-"+e.id),l(),d("ngTemplateOutlet",a.tabTemplate)("ngTemplateOutletContext",I(3,he,e.id))}}function Pe(n,t){if(n&1&&(Z(0),p(1,we,2,5,"div",8),ee()),n&2){let e=t.$implicit,a=u();l(),d("ngIf",e.id===a.activeTab())}}var R=class n{tabs=[];requestedTab=null;tabClosed=new X;tabTemplate;activeTab=w(null);ngOnChanges(t){if(t.tabs){let a=t.tabs.currentValue.map(c=>c.id),s=null;this.requestedTab&&a.includes(this.requestedTab)?(s=this.requestedTab,this.requestedTab=null):this.activeTab()&&a.includes(this.activeTab())?s=this.activeTab():s=a.length>0?a[0]:null,this.activeTab.set(s)}}selectTab(t){this.activeTab.set(t)}closeTab(t,e){if(t.stopPropagation(),this.activeTab()===e){let a=this.tabs.findIndex(s=>s.id===e);if(this.tabs.length>1){let s=a>0?a-1:1;this.activeTab.set(this.tabs[s].id)}else this.activeTab.set(null)}this.tabClosed.emit(e)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=_({type:n,selectors:[["app-tabs-container"]],contentQueries:function(e,a,s){if(e&1&&ne(s,Y,5),e&2){let c;ie(c=oe())&&(a.tabTemplate=c.first)}},inputs:{tabs:"tabs",requestedTab:"requestedTab"},outputs:{tabClosed:"tabClosed"},features:[J],decls:5,vars:2,consts:[[1,"nav","nav-tabs"],["class","nav-item",4,"ngFor","ngForOf"],[1,"row"],[1,"tab-content"],[4,"ngFor","ngForOf"],[1,"nav-item"],["href","javascript:void(0)","role","tab",1,"nav-link",3,"click","id"],["type","button",1,"btn-close","btn-close-sm","ms-3",3,"click"],["role","tabpanel",4,"ngIf"],["role","tabpanel"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,a){e&1&&(i(0,"ul",0),p(1,Oe,4,6,"li",1),o(),i(2,"div",2)(3,"div",3),p(4,Pe,2,1,"ng-container",4),o()()),e&2&&(l(),d("ngForOf",a.tabs),l(3),d("ngForOf",a.tabs))},dependencies:[h,ce,x,de],styles:[".nav-tabs[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;overflow-x:auto;overflow-y:hidden;width:100%;border-bottom:none}.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{flex-shrink:0;display:flex;align-items:center;margin-right:1rem}.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#495057;font-weight:500;padding:10px 15px;background-color:transparent;border:none;border-radius:0;display:flex;align-items:center;white-space:nowrap}.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#007bff;background:#fff;border:none;border-bottom:4px solid #007bff;text-decoration:none}.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{flex-shrink:0;color:#007bff;margin-left:-.25rem;margin-right:.5rem}.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{opacity:1;color:red}.nav-tabs[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover:not(.active){color:#212529;background-color:#f8f9fa;cursor:pointer}.tab-content[_ngcontent-%COMP%]{background-color:#f8f9fa;border:1px solid #dee2e6;border-radius:0 0 8px 8px;border-top:none!important;padding:1.5rem 1.5rem 2rem!important}.row[_ngcontent-%COMP%]{margin-left:0;margin-right:0}"]})};var ye=n=>["/forecast",n];function Te(n,t){if(n&1&&(i(0,"div",2)(1,"h2",3),r(2),o(),i(3,"div",4),C(4,"img",5),i(5,"div",6)(6,"h2",7),r(7),o(),i(8,"p",8),r(9),o()()(),i(10,"div",9)(11,"div",10)(12,"span",11),r(13,"\u{1F4A7} Humedad"),o(),i(14,"span",12),r(15),o(),i(16,"div",13),C(17,"div",14),o()(),i(18,"div",15)(19,"span",11),r(20,"Sensaci\xF3n"),o(),i(21,"span",12),r(22),o()(),i(23,"div",15)(24,"span",11),r(25,"\u{1F4A8} Viento"),o(),i(26,"span",12),r(27),k(28,"number"),o()(),i(29,"div",15)(30,"span",11),r(31,"Presi\xF3n"),o(),i(32,"span",12),r(33),o()(),i(34,"div",15)(35,"span",11),r(36,"\xCDndice UV"),o(),i(37,"span",12),r(38),k(39,"number"),o(),i(40,"div",13),C(41,"div",16),o()(),i(42,"div",15)(43,"span",11),r(44,"Visibilidad"),o(),i(45,"span",12),r(46),k(47,"number"),o()(),i(48,"div",15)(49,"span",11),r(50," \u2600\uFE0F Amanecer "),o(),i(51,"span",12),r(52),o()(),i(53,"div",15)(54,"span",11),r(55," \u{1F319} Atardecer "),o(),i(56,"span",12),r(57),o()()(),i(58,"a",17),r(59," Ver pronostico de los proximos 5 dias "),C(60,"i",18),o()()),n&2){let e=u();l(2),y(e.conditions.data==null||e.conditions.data[0]==null?null:e.conditions.data[0].city_name),l(2),d("src","https://www.weatherbit.io/static/img/icons/"+(e.conditions.data==null||e.conditions.data[0]==null||e.conditions.data[0].weather==null?null:e.conditions.data[0].weather.icon)+".png",K)("alt",e.conditions.data==null||e.conditions.data[0]==null||e.conditions.data[0].weather==null?null:e.conditions.data[0].weather.description),l(3),m("",e.conditions.data==null||e.conditions.data[0]==null?null:e.conditions.data[0].temp,"\xB0C"),l(2),y(e.conditions.data==null||e.conditions.data[0]==null||e.conditions.data[0].weather==null?null:e.conditions.data[0].weather.description),l(6),m("",e.conditions.data==null||e.conditions.data[0]==null?null:e.conditions.data[0].rh,"%"),l(2),N("width",(e.conditions.data==null||e.conditions.data[0]==null?null:e.conditions.data[0].rh)+"%"),v("aria-valuenow",e.conditions.data==null||e.conditions.data[0]==null?null:e.conditions.data[0].rh),l(5),m("",e.conditions.data==null||e.conditions.data[0]==null?null:e.conditions.data[0].app_temp,"\xB0C"),l(5),re("",D(28,21,e.conditions.data==null||e.conditions.data[0]==null?null:e.conditions.data[0].wind_spd,"1.0-1")," mph ",e.conditions.data==null||e.conditions.data[0]==null?null:e.conditions.data[0].wind_cdir_full),l(6),m("",e.conditions.data==null||e.conditions.data[0]==null?null:e.conditions.data[0].pres," mb"),l(5),y(D(39,24,e.conditions.data==null||e.conditions.data[0]==null?null:e.conditions.data[0].uv,"1.0-0")),l(3),N("width",((e.conditions.data==null||e.conditions.data[0]==null?null:e.conditions.data[0].uv)||0/11)*100+"%"),v("aria-valuenow",e.conditions.data==null||e.conditions.data[0]==null?null:e.conditions.data[0].uv),l(5),y(D(47,27,e.conditions.data==null||e.conditions.data[0]==null?null:e.conditions.data[0].vis,"1.0-0")),l(6),m("",e.conditions.data==null||e.conditions.data[0]==null?null:e.conditions.data[0].sunrise," "),l(5),m("",e.conditions.data==null||e.conditions.data[0]==null?null:e.conditions.data[0].sunset," "),l(),d("routerLink",I(30,ye,e.zipcode))}}function Se(n,t){if(n&1&&(i(0,"div",19)(1,"div",20)(2,"span",21),r(3,"Cargando..."),o()(),i(4,"span",22),r(5),o()()),n&2){let e=u();l(5),m("Cargando datos para ",e.zipcode,"...")}}var A=class n{zipcode;weatherApi=g(j);conditions=null;ngOnInit(){this.zipcode&&this.weatherApi.getCurrentConditions(this.zipcode).subscribe(t=>{this.conditions=t})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=_({type:n,selectors:[["app-current-conditions"]],inputs:{zipcode:"zipcode"},decls:3,vars:2,consts:[["loading",""],["class","weather-card",4,"ngIf","ngIfElse"],[1,"weather-card"],[1,"weather-card-title"],[1,"current-temp-section"],["width","80","height","80",3,"src","alt"],[1,"temp-details"],[1,"temperature"],[1,"description"],[1,"details-grid"],[1,"detail-item","detail-graph"],[1,"detail-label"],[1,"detail-value"],[1,"progress","mt-1",2,"height","5px"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-info"],[1,"detail-item"],["role","progressbar","aria-valuemin","0","aria-valuemax","11",1,"progress-bar","bg-warning"],[1,"btn","btn-link","link-style","mt-4",3,"routerLink"],[1,"bi","bi-arrow-right","ms-2"],[1,"d-flex","justify-content-center","align-items-center","p-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"ms-3","text-muted"]],template:function(e,a){if(e&1&&p(0,Te,61,32,"div",1)(1,Se,6,1,"ng-template",null,0,F),e&2){let s=E(2);d("ngIf",a.conditions)("ngIfElse",s)}},dependencies:[h,x,q,ue],styles:[".weather-card[_ngcontent-%COMP%]{background-color:#fff;padding:30px;border-radius:12px;box-shadow:0 4px 12px #00000014;transition:all .3s ease}.weather-card[_ngcontent-%COMP%]:hover{box-shadow:0 6px 16px #00000014}.weather-card[_ngcontent-%COMP%]   .weather-card-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#333;margin-bottom:25px;border-bottom:1px solid #e9ecef;padding-bottom:15px}.weather-card[_ngcontent-%COMP%]   .current-temp-section[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:30px}.weather-card[_ngcontent-%COMP%]   .current-temp-section[_ngcontent-%COMP%]   .weather-icon[_ngcontent-%COMP%]{width:90px;height:90px;flex-shrink:0}.weather-card[_ngcontent-%COMP%]   .current-temp-section[_ngcontent-%COMP%]   .temp-details[_ngcontent-%COMP%]{margin-left:20px}.weather-card[_ngcontent-%COMP%]   .current-temp-section[_ngcontent-%COMP%]   .temp-details[_ngcontent-%COMP%]   .temperature[_ngcontent-%COMP%]{font-size:3rem;font-weight:300;margin-bottom:-5px;color:#333}.weather-card[_ngcontent-%COMP%]   .current-temp-section[_ngcontent-%COMP%]   .temp-details[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:1rem;color:#6c757d;font-weight:400;text-transform:capitalize;margin:0}.weather-card[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:20px;padding-top:15px;border-top:1px dashed #e9ecef}.weather-card[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;padding:5px 0}.weather-card[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{font-size:.9rem;color:#6c757d}.weather-card[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#333}.weather-card[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]   .detail-item.detail-graph[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%], .weather-card[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]   .detail-item.detail-graph[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{display:inline-block}.weather-card[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]   .detail-item.detail-graph[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{margin-top:5px;width:100%}.weather-card[_ngcontent-%COMP%]   .link-style[_ngcontent-%COMP%]{display:inline-flex;align-items:center;color:#007bff;font-weight:500;text-decoration:none;padding:0}.weather-card[_ngcontent-%COMP%]   .link-style[_ngcontent-%COMP%]:hover{text-decoration:underline;opacity:.85}"]})};function ve(n,t){let e=t?.injector??g(H),a=new W(1),s=se(()=>{let c;try{c=n()}catch(b){V(()=>a.error(b));return}V(()=>a.next(c))},{injector:e,manualCleanup:!0});return e.get(T).onDestroy(()=>{s.destroy(),a.complete()}),a.asObservable()}function Ce(n,t){let a=!t?.manualCleanup?t?.injector?.get(T)??g(T):null,s=Ee(t?.equal),c;t?.requireSync?c=w({kind:0},{equal:s}):c=w({kind:1,value:t?.initialValue},{equal:s});let b,L=n.subscribe({next:f=>c.set({kind:1,value:f}),error:f=>{c.set({kind:2,error:f}),b?.()},complete:()=>{b?.()}});if(t?.requireSync&&c().kind===0)throw new z(601,!1);return b=a?.onDestroy(L.unsubscribe.bind(L)),le(()=>{let f=c();switch(f.kind){case 1:return f.value;case 2:throw f.error;case 0:throw new z(601,!1)}},{equal:t?.equal})}function Ee(n=Object.is){return(t,e)=>t.kind===1&&e.kind===1&&n(t.value,e.value)}var xe=()=>["/dashboard"];function Ie(n,t){n&1&&(i(0,"div",5),r(1," No has a\xF1adido ninguna ubicaci\xF3n. "),i(2,"a",6),r(3,"A\xF1ade una"),o(),r(4," para empezar. "),o()),n&2&&(l(2),d("routerLink",$(1,xe)))}function ke(n,t){if(n&1&&C(0,"app-current-conditions",8),n&2){let e=t.$implicit;d("zipcode",e)}}function De(n,t){if(n&1){let e=S();i(0,"app-tabs-container",7),P("tabClosed",function(s){O(e);let c=u();return M(c.onTabClosed(s))}),p(1,ke,1,1,"ng-template"),o()}if(n&2){let e=u();d("tabs",e.tabs())("requestedTab",e.requestedActiveTab)}}var _e=class n{ngOnInit(){this.requestedActiveTab=this.route.snapshot.queryParamMap.get("active")}locationService=g(me);weatherApi=g(j);route=g(pe);locations=this.locationService.locations;requestedActiveTab=null;locationSignal=this.locationService.locations;locations$=ve(this.locationSignal);tabs$=this.locations$.pipe(Q(t=>{if(t.length===0)return U([]);let e=t.map(a=>this.weatherApi.getCurrentConditions(a).pipe(G(s=>({id:a,title:`${s.data?.[0]?.city_name} (${a})`}))));return B(e)}));tabs=Ce(this.tabs$,{initialValue:[]});onTabClosed(t){this.locationService.removeLocation(t)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=_({type:n,selectors:[["app-weather-tabs"]],decls:9,vars:4,consts:[["showTabs",""],[1,"container","flex-grow-1","d-flex","flex-column","mt-4"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"btn","btn-outline-secondary",3,"routerLink"],["class","alert alert-info text-center",4,"ngIf","ngIfElse"],[1,"alert","alert-info","text-center"],[3,"routerLink"],[3,"tabClosed","tabs","requestedTab"],[3,"zipcode"]],template:function(e,a){if(e&1&&(i(0,"div",1)(1,"div",2)(2,"h1"),r(3,"Clima Actual"),o(),i(4,"a",3),r(5," + Nueva ubicaci\xF3n "),o()(),p(6,Ie,5,2,"div",4)(7,De,2,2,"ng-template",null,0,F),o()),e&2){let s=E(8);l(4),d("routerLink",$(3,xe)),l(2),d("ngIf",a.locations().length===0)("ngIfElse",s)}},dependencies:[h,x,R,A,q],styles:[".container[_ngcontent-%COMP%]{padding-bottom:30px}.container[_ngcontent-%COMP%]   .d-flex.justify-content-between.align-items-center.mb-3[_ngcontent-%COMP%]{padding-bottom:10px;border-bottom:1px solid #dee2e6;margin-bottom:1.5rem!important}.container[_ngcontent-%COMP%]   .d-flex.justify-content-between.align-items-center.mb-3[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:300;color:#333;margin:0}.container[_ngcontent-%COMP%]   .d-flex.justify-content-between.align-items-center.mb-3[_ngcontent-%COMP%]   .btn-outline-secondary[_ngcontent-%COMP%]{color:#6c757d;border-color:#dee2e6;font-weight:500;transition:all .2s ease}.container[_ngcontent-%COMP%]   .d-flex.justify-content-between.align-items-center.mb-3[_ngcontent-%COMP%]   .btn-outline-secondary[_ngcontent-%COMP%]:hover{color:#fff;background-color:#007bff;border-color:#007bff}.container[_ngcontent-%COMP%]   .alert.alert-info[_ngcontent-%COMP%]{border-radius:8px;background-color:#e6f2ff;color:#6c757d;border-color:#b3d7ff;font-size:1.1rem;padding:1.5rem}.container[_ngcontent-%COMP%]   .alert.alert-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff;font-weight:600;text-decoration:none}.container[_ngcontent-%COMP%]   .alert.alert-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};export{_e as WeatherTabs};
